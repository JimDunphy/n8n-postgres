# Copy this file to .env and edit values as needed.
# .env is git-ignored to protect secrets.

# === USER SETTINGS ===
DOMAIN=YourDomain.com
SSL_EMAIL=YourName@Mail.com
STRONG_PASSWORD=CHANGE_ME_BASE64_16_BYTES
GENERIC_TIMEZONE=America/Vancouver

# === SECRETS (USE STRONG VALUES!)
# Important: n8n credential encryption (persistent across upgrades/restores)
N8N_ENCRYPTION_KEY=CHANGE_ME_BASE64_32_BYTES
RUNNERS_AUTH_TOKEN=${STRONG_PASSWORD}

# === n8n BASIC AUTH ===
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=${STRONG_PASSWORD}

# === n8n ENV ===
# Pin to a specific version for predictable upgrades (recommended)
# Example: N8N_IMAGE_TAG=1.68.0
# Leave as 'latest' only if you plan to update frequently and monitor releases
N8N_IMAGE_TAG=latest
N8N_PORT=5678
NODE_ENV=production
WEBHOOK_URL=https://${DOMAIN}
N8N_HOST=${DOMAIN}
N8N_PROTOCOL=https

# Behind reverse proxy (HTTPS), secure cookies should be true
N8N_SECURE_COOKIE=true

N8N_EDITOR_BASE_URL=https://${DOMAIN}
N8N_PUBLIC_API_BASE_URL=https://${DOMAIN}
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true

# === Resource limits (optional; see compose.yml) ===
# Memory caps are parameterized in compose.yml to keep things flexible.
# If unset, compose.yml defaults to 1g each. Adjust to fit your host if needed.
# N8N_MEM_LIMIT=1g
# POSTGRES_MEM_LIMIT=1g

# CPU cap is provided in compose.yml but commented out for simplicity.
# To enable, uncomment the 'cpus' line in compose.yml and set this value.
# N8N_CPUS=0.75

# === PostgreSQL connection used by n8n ===
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=postgres
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=n8n
DB_POSTGRESDB_PASSWORD=${STRONG_PASSWORD}

# === PostgreSQL container ===
POSTGRES_USER=n8n
POSTGRES_PASSWORD=${STRONG_PASSWORD}
POSTGRES_DB=n8n

# === INTERNAL TASK RUNNER ===
N8N_RUNNERS_ENABLED=true
N8N_RUNNERS_MODE=internal
N8N_RUNNERS_MAX_CONCURRENCY=5
N8N_RUNNERS_AUTH_TOKEN=${RUNNERS_AUTH_TOKEN}
